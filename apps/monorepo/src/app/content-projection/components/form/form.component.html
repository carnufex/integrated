<form class="donut-form" #form="ngForm" *ngIf="donut; else loading">
  <ng-content select="h3"></ng-content>

  <ng-content select="a"></ng-content>
  <label>
    <span>Name</span>
    <input
      type="text"
      name="name"
      class="input"
      [ngModel]="donut.name"
      required
      minlength="5"
      [ngModelOptions]="{ updateOn: 'blur' }"
      #name="ngModel"
    />
    <ng-container *ngIf="name.invalid && name.touched">
      <div class="donut-form-error" *ngIf="name.errors?.['required']">
        Name is required.
      </div>
      <div class="donut-form-error" *ngIf="name.errors?.['minlength']">
        Minimum length of a name is 5!
      </div>
    </ng-container>
  </label>

  <label>
    <span>Price</span>
    <input
      type="number"
      name="price"
      class="input"
      [ngModel]="donut.price"
      required
      minlength="1"
      #price="ngModel"
    />
    <ng-container *ngIf="price.invalid && price.touched">
      <div class="donut-form-error" *ngIf="price.errors?.['required']">
        Price is required.
      </div>
      <div class="donut-form-error" *ngIf="price.errors?.['minlength']">
        Minimum length of a name is 1!
      </div>
    </ng-container>
  </label>

  <div class="donut-form-radios">
    <p class="donut-form-radios-label">Promo:</p>
    <label>
      <input
        type="radio"
        name="promo"
        required
        [value]="undefined"
        [ngModel]="donut.promo"
      />
      <span>None</span>
    </label>
    <label>
      <input
        type="radio"
        name="promo"
        required
        value="new"
        [ngModel]="donut.promo"
      />
      <span>New</span>
    </label>
    <label>
      <input
        type="radio"
        name="promo"
        required
        value="limited"
        [ngModel]="donut.promo"
      />
      <span>Limited</span>
    </label>
  </div>

  <label>
    <textarea
      name="description"
      class="input input--textarea"
      required
      [ngModel]="donut.description"
      #desc="ngModel"
    ></textarea>
    <ng-container *ngIf="desc.invalid && desc.touched">
      <div class="donut-form-error" *ngIf="desc.errors?.['required']">
        Description is required.
      </div>
    </ng-container>
  </label>

  <!-- <button class="btn btn--green" (click)="handleCreate(form)" *ngIf="!isEdit">
    Create
  </button>
  <button class="btn btn--green" (click)="handleUpdate(form)" *ngIf="isEdit">
    Update
  </button>
  <button class="btn btn--green" (click)="handleDelete()" *ngIf="isEdit">
    Delete
  </button>
  <button
    type="button"
    class="btn btn--grey"
    (click)="form.resetForm()"
    *ngIf="form.touched || isEdit"
  >
    Reset Form
  </button> -->

  <div class="donut-form-working" *ngIf="form.valid && form.submitted">
    working...
  </div>
</form>

<ng-template #loading>Loading...</ng-template>
